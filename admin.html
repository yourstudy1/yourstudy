<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<style>
body{font-family:Arial; background:#111; color:white; padding:20px;}
.grid{display:grid; grid-template-columns:repeat(3,1fr); gap:10px;}
.box{border:1px solid gray; padding:10px;}
select,input,textarea{width:100%; padding:5px; margin-top:5px;}
button{padding:8px 15px; margin-top:10px; cursor:pointer;}
#panel{display:none;}
</style>
</head>
<body>

<h2>Admin Login</h2>
<input type="password" id="pass" placeholder="Password">
<button onclick="login()">Login</button>

<div id="panel">

<h3>Routine Setup</h3>

<div class="grid" id="slots"></div>

<button onclick="saveRoutine()">Save Routine</button>

<h3>Text Color</h3>
<input type="color" id="colorPicker">
<button onclick="saveColor()">Save Color</button>

<h3>Custom Notification (15 Min)</h3>
<textarea id="customMsg"></textarea>
<button onclick="sendCustom()">Send 15 Min Notification</button>

</div>

<script>

const scriptURL="https://script.google.com/macros/s/AKfycbxq49CFhIWiKHxh69xPBczmBuiMcjw5YIoYuEq6lwZYybsAZWuG2Q9q8guseFWTa2Wd0A/exec";
const password="king2026";

/* LOGIN */
function login(){
if(document.getElementById("pass").value===password){
document.getElementById("panel").style.display="block";
}else{
alert("Wrong Password");
}
}

/* GENERATE TIME DROPDOWN */
function generateTimeOptions(){
let options="";
for(let h=0;h<24;h++){
for(let m=0;m<60;m+=15){
let hh=String(h).padStart(2,"0");
let mm=String(m).padStart(2,"0");
options+=`<option>${hh}:${mm}</option>`;
}
}
return options;
}

/* CREATE 6 SLOT */
for(let i=1;i<=6;i++){
document.getElementById("slots").innerHTML+=`
<div class="box">
Time:
<select id="time${i}">${generateTimeOptions()}</select>
Subject:
<select id="subject${i}">
<option>Math</option>
<option>English</option>
<option>GS</option>
<option>Reasoning</option>
<option>Mock</option>
<option>Revision</option>
</select>
Duration (min):
<input type="number" id="duration${i}" value="25">
</div>`;
}

/* SAVE ROUTINE */
function saveRoutine(){

let routine=[];

for(let i=1;i<=6;i++){
routine.push({
time:document.getElementById("time"+i).value,
subject:document.getElementById("subject"+i).value,
duration:Number(document.getElementById("duration"+i).value)
});
}

localStorage.setItem("routine",JSON.stringify(routine));
alert("Routine Saved");
}

/* SAVE COLOR */
function saveColor(){
localStorage.setItem("textColor",
document.getElementById("colorPicker").value);
alert("Color Saved");
}

/* CUSTOM */
function sendCustom(){

let msg=document.getElementById("customMsg").value;

localStorage.setItem("customNotification",JSON.stringify({
message:msg,
expire:Date.now()+900000
}));

fetch(scriptURL,{
method:"POST",
body:new URLSearchParams({
type:"warning",
subject:"CUSTOM",
message:msg
})
});

alert("Custom Notification Sent");
}

</script>

</body>
</html>
